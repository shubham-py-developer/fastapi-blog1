{% extends "base.html" %}

{% block title %}
<title>{{ blog.title }} | FastAPI Blog</title>
{% endblock %}

{% block content %}

<!-- Reading Progress Bar -->
<div class="progress-bar" id="progressBar"></div>

<div class="container my-5">

    <div class="blog-card mx-auto">

        <!-- Header -->
        <div class="blog-header text-center">
            <h1 class="blog-title">{{ blog.title }}</h1>

            <div class="blog-meta">
                <span>üóì {{ blog.created_at.strftime('%d %B %Y') }}</span>
                <span>‚è± {{ (blog.content|length // 200) + 1 }} min read</span>
                <span>‚úçÔ∏è Admin</span>
            </div>
        </div>

        <!-- Blog Content -->
        <div class="blog-content ck-content">
            {{ blog.content | safe }}
        </div>

        <!-- Share Section -->
        <div class="share-section text-center mt-5">
            <p class="share-text">Enjoyed this blog? Share it üöÄ</p>
            <div class="share-buttons">
                <a target="_blank" href="https://twitter.com/intent/tweet?text={{ blog.title }}" class="share-btn twitter">Twitter</a>
                <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u={{ request.url }}" class="share-btn facebook">Facebook</a>
                <a target="_blank" href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.url }}" class="share-btn linkedin">LinkedIn</a>
                <a href="https://wa.me/?text={{ blog.title }} {{ request.url }}" target="_blank" class="share-btn whatsapp">WhatsApp</a>
            </div>
        </div>

        <div class="text-center mt-4">
            <a href="/" class="back-btn">‚Üê Back to All Blogs</a>
        </div>
    </div>
</div>

<!-- CKEditor Content Styling -->
<link rel="stylesheet" href="https://cdn.ckeditor.com/ckeditor5/38.1.1/decoupled-document/styles.css">

<!-- Styles -->
<style>
body { background: #f5f7fb; font-family: 'Poppins', sans-serif; }
.progress-bar { position: fixed; top:0; left:0; height:4px; width:0%; background: linear-gradient(90deg,#0d6efd,#6610f2); z-index:9999; }
.blog-card{ max-width:900px; background: rgba(255,255,255,0.85); backdrop-filter: blur(10px); border-radius:20px; padding:50px; box-shadow:0 20px 60px rgba(0,0,0,0.12); transition:0.4s;}
.blog-card:hover{ transform:translateY(-8px); box-shadow:0 25px 70px rgba(0,0,0,0.18);}
.blog-title{ font-size:2.8rem; font-weight:700; margin-bottom:15px; background: linear-gradient(90deg,#0d6efd,#6610f2); -webkit-background-clip:text; -webkit-text-fill-color:transparent;}
.blog-meta{ color:#6c757d; font-size:0.95rem; display:flex; justify-content:center; gap:20px; flex-wrap:wrap;}
.blog-content{ margin-top:40px; font-size:1.15rem; line-height:1.9; color:#343a40; }
.blog-content img{ max-width:100%; border-radius:10px; margin:15px 0; }
.blog-content pre{ background:#f1f1f1; padding:15px; border-radius:8px; overflow-x:auto; }
.blog-content table{ width:100%; border-collapse:collapse; margin:20px 0;}
.blog-content th, .blog-content td{ border:1px solid #ddd; padding:10px; text-align:left; }
.share-section{ margin-top:50px; padding-top:25px; border-top:1px solid #eee; }
.share-text{ font-weight:600; margin-bottom:15px;}
.share-buttons{ display:flex; justify-content:center; gap:12px; flex-wrap:wrap;}
.share-btn{ padding:10px 18px; border-radius:30px; text-decoration:none; color:white; font-size:0.9rem; transition:0.3s;}
.twitter{background:#1da1f2;}
.facebook{background:#1877f2;}
.linkedin{background:#0a66c2;}
.whatsapp{background:#25d366;}
.share-btn:hover{ transform:scale(1.08);}
.back-btn{ display:inline-block; margin-top:20px; padding:12px 25px; border-radius:30px; background:linear-gradient(90deg,#0d6efd,#6610f2); color:white; text-decoration:none; font-weight:500; transition:0.3s; }
.back-btn:hover{ transform:scale(1.05); color:white; }

/* CKEditor alignment support */
.ck-content .ck-align-left { text-align: left; }
.ck-content .ck-align-center { text-align: center; }
.ck-content .ck-align-right { text-align: right; }
.ck-content .ck-align-justify { text-align: justify; }

@media(max-width:768px){ .blog-card{padding:30px 20px;} .blog-title{font-size:2rem;} }
</style>

<!-- Reading Progress -->
<script>
window.onscroll = function() {
  let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
  let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
  let scrolled = (winScroll / height) * 100;
  document.getElementById("progressBar").style.width = scrolled + "%";
};
</script>

{% endblock %}
